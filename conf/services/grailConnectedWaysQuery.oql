//assign query to ref
._->.ref;

//get relations and ways referencing any of these elements
//but leave them incomplete
//This is just for elements that have a node inside the bbox
(._;<;)->.parents;

//get ref nodes outside of bbox
(node(w.ref); - node(w.ref)({{bbox}});)->.oobnd;

//get ways referencing out of bounds nodes
way(bn.oobnd);

//recurse to get nodes of connected ways
(._;>;)->.connectedWays;

//union ref and oob connected ways
(.ref; .parents; .connectedWays;);

out meta;
